# Author: Philip Weigel

record(aai, "$(DEVICE):data") {
    field(DESC, "All temps and flows from sensor box")
    field(DTYP, "stream")
    field(INP, "@libcom1.proto read_all_array $(PORT)")
    field(SCAN, ".5 second")
    field(NELM, "12")
    field(FTVL, "DOUBLE")
    field(FLNK, "$(DEVICE):int:fanout.PROC PP")
}

record(fanout, "$(DEVICE):int:fanout") {
    field(SELM, "All")
    field(LNK0, "$(DEVICE):t1:gettemp")
    field(LNK1, "$(DEVICE):t2:gettemp")
	field(LNK2, "$(DEVICE):t3:gettemp")
	field(LNK3, "$(DEVICE):t4:gettemp")
	field(LNK4, "$(DEVICE):t5:gettemp")
	field(LNK5, "$(DEVICE):t6:gettemp")
	field(LNK6, "$(DEVICE):t7:gettemp")
	field(LNK7, "$(DEVICE):f1:getflow")
	field(LNK8, "$(DEVICE):f2:getflow")
	field(LNK9, "$(DEVICE):f3:getflow")
	field(LNKA, "$(DEVICE):f4:getflow")
	field(LNKB, "$(DEVICE):f5:getflow")
}

record(ai, "$(DEVICE):t1:gettemp") {
    field(DESC, "Get t1 temperature")
    field(INP, "$(DEVICE):data.VAL[0] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t2:gettemp") {
    field(DESC, "Get t2 temperature")
    field(INP, "$(DEVICE):data.VAL[1] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t3:gettemp") {
    field(DESC, "Get t3 temperature")
    field(INP, "$(DEVICE):data.VAL[2] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t4:gettemp") {
    field(DESC, "Get t4 temperature")
    field(INP, "$(DEVICE):data.VAL[3] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t5:gettemp") {
    field(DESC, "Get t5 temperature")
    field(INP, "$(DEVICE):data.VAL[4] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t6:gettemp") {
    field(DESC, "Get t6 temperature")
    field(INP, "$(DEVICE):data.VAL[5] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):t7:gettemp") {
    field(DESC, "Get t7 temperature")
    field(INP, "$(DEVICE):data.VAL[6] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):f1:getflow") {
    field(DESC, "Get f1 flow")
    field(INP, "$(DEVICE):data.VAL[7] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):f2:getflow") {
    field(DESC, "Get f2 flow")
    field(INP, "$(DEVICE):data.VAL[8] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):f3:getflow") {
    field(DESC, "Get f3 flow")
    field(INP, "$(DEVICE):data.VAL[9] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):f4:getflow") {
    field(DESC, "Get f4 flow")
    field(INP, "$(DEVICE):data.VAL[10] CA")
    field(SCAN, "Passive")
}

record(ai, "$(DEVICE):f5:getflow") {
    field(DESC, "Get f5 flow")
    field(INP, "$(DEVICE):data.VAL[11] CA")
    field(SCAN, "Passive")
}
